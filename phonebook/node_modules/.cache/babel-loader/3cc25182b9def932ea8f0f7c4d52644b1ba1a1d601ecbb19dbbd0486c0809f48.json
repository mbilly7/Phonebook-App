{"ast":null,"code":"import _objectSpread from\"/Users/stewa/Coding/FullStackOpen/phonebook/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/stewa/Coding/FullStackOpen/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{useEffect}from'react';import Filter from'./Filter';import SuccessNotification from'./SuccessNotification';import PersonForm from'./PersonForm';import Persons from'./Persons';import personsService from'./services/personsService.js';import ErrorNotification from'./ErrorNotification';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),searchTerm=_useState8[0],setSearchTerm=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),successMessage=_useState10[0],setSuccessMessage=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),errorMessage=_useState12[0],setErrorMessage=_useState12[1];useEffect(function(){personsService.getAll().then(function(initialPersons){setPersons(initialPersons);});},[]);var addPerson=function addPerson(event){event.preventDefault();var duplicateIndex=persons.findIndex(function(person){return person.name===newName;});if(duplicateIndex!==-1){if(window.confirm(\"\".concat(newName,\" is already added to phonebook, would you like to replace the number?\"))){var duplicatePerson=persons[duplicateIndex];var updatedPerson=_objectSpread(_objectSpread({},duplicatePerson),{},{number:newNumber});personsService.update(duplicatePerson.id,updatedPerson).then(function(){setPersons(persons.map(function(person){return person.id===duplicatePerson.id?updatedPerson:person;}));setSuccessMessage(\"The number of \".concat(duplicatePerson.name,\" was successfully updated.\"));setTimeout(function(){setSuccessMessage(null);},5000);}).catch(function(){setErrorMessage(\"The number of \".concat(duplicatePerson.name,\" has already been deleted.\"));setTimeout(function(){setErrorMessage(null);},5000);});}}else{var personObject={name:newName,number:newNumber};personsService.create(personObject).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));setSuccessMessage(\"The number of \".concat(returnedPerson.name,\" was successfully added.\"));setTimeout(function(){setSuccessMessage(null);},5000);});}setNewName('');setNewNumber('');};var handleNewName=function handleNewName(event){setNewName(event.target.value);};var handleNewNumber=function handleNewNumber(event){setNewNumber(event.target.value);};var handleSearchTerm=function handleSearchTerm(event){setSearchTerm(event.target.value);};var handleDelete=function handleDelete(event,idForDeletion,nameForDeletion){if(window.confirm(\"Are you sure you want to delete \".concat(nameForDeletion))){personsService.deletePerson(idForDeletion).then(function(){setPersons(persons.filter(function(person){return person.id!==idForDeletion;}));});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(SuccessNotification,{message:successMessage}),/*#__PURE__*/_jsx(ErrorNotification,{message:errorMessage}),/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Filter,{searchTerm:searchTerm,handleSearchTerm:handleSearchTerm}),/*#__PURE__*/_jsx(\"h3\",{children:\"Add new\"}),/*#__PURE__*/_jsx(PersonForm,{addPerson:addPerson,newName:newName,newNumber:newNumber,handleNewName:handleNewName,handleNewNumber:handleNewNumber}),/*#__PURE__*/_jsx(\"h3\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{persons:persons,searchTerm:searchTerm,handleDelete:handleDelete})]});};export default App;","map":{"version":3,"names":["useState","useEffect","Filter","SuccessNotification","PersonForm","Persons","personsService","ErrorNotification","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","searchTerm","setSearchTerm","successMessage","setSuccessMessage","errorMessage","setErrorMessage","getAll","then","initialPersons","addPerson","event","preventDefault","duplicateIndex","findIndex","person","name","window","confirm","duplicatePerson","updatedPerson","number","update","id","map","setTimeout","catch","personObject","create","returnedPerson","concat","handleNewName","target","value","handleNewNumber","handleSearchTerm","handleDelete","idForDeletion","nameForDeletion","deletePerson","filter"],"sources":["/Users/stewa/Coding/FullStackOpen/phonebook/src/App.js"],"sourcesContent":["import { useState } from 'react'\nimport { useEffect } from 'react'\nimport Filter from './Filter'\nimport SuccessNotification from './SuccessNotification'\nimport PersonForm from './PersonForm'\nimport Persons from './Persons'\nimport personsService from './services/personsService.js'\nimport ErrorNotification from './ErrorNotification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [searchTerm, setSearchTerm] = useState('')\n  const [successMessage, setSuccessMessage] = useState()\n  const [errorMessage, setErrorMessage] = useState()\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const duplicateIndex = persons.findIndex(person => person.name === newName)\n\n    if (duplicateIndex !== -1) {\n      if (window.confirm(`${newName} is already added to phonebook, would you like to replace the number?`)) {\n        const duplicatePerson = persons[duplicateIndex]\n        const updatedPerson = {\n          ...duplicatePerson,\n          number: newNumber\n        }\n        \n        personsService\n          .update(duplicatePerson.id, updatedPerson)\n          .then(() => {\n            setPersons(persons.map(person => person.id === duplicatePerson.id ? updatedPerson : person))\n            setSuccessMessage(`The number of ${duplicatePerson.name} was successfully updated.`)\n            setTimeout(() => {\n              setSuccessMessage(null)\n            }, 5000)\n          })\n          .catch(() => {\n            setErrorMessage(`The number of ${duplicatePerson.name} has already been deleted.`)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n      }\n    }\n    else {\n      const personObject = {\n        name: newName,\n        number: newNumber\n      }\n\n      personsService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setSuccessMessage(`The number of ${returnedPerson.name} was successfully added.`)\n          setTimeout(() => {\n            setSuccessMessage(null)\n          }, 5000)\n      })\n    }\n\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const handleNewName = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNewNumber = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearchTerm = (event) => {\n    setSearchTerm(event.target.value)\n  }\n\n  const handleDelete = (event, idForDeletion, nameForDeletion) => {\n    if (window.confirm(`Are you sure you want to delete ${nameForDeletion}`)) {\n      personsService\n          .deletePerson(idForDeletion)\n          .then(() => {\n            setPersons(persons.filter(person => person.id !== idForDeletion))\n      })\n    }\n  }\n\n  return (\n    <div>\n      <SuccessNotification message={successMessage} />\n      <ErrorNotification message={errorMessage} />\n      <h2>Phonebook</h2>\n      <Filter searchTerm={searchTerm} handleSearchTerm={handleSearchTerm}/>\n      <h3>Add new</h3>\n      <PersonForm addPerson={addPerson} newName={newName} newNumber={newNumber} handleNewName={handleNewName} handleNewNumber={handleNewNumber}/>\n      <h3>Numbers</h3>\n      <Persons persons={persons} searchTerm={searchTerm} handleDelete={handleDelete}/>\n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}